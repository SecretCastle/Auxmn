{"version":3,"sources":["src/mvvm/Observer.js","src/mvvm/Compile.js","src/mvvm/index.js"],"names":["Observer","data","walk","prototype","Object","keys","forEach","convert","key","value","defineReactive","dep","Dep","defineProperty","enumerable","configurable","get","target","depend","set","newValue","uid","id","subs","addSub","sub","push","notify","update","observe","vm","Compile","el","$vm","$el","isElementNode","document","querySelector","$fragment","node2fragment","init","appendChild","fragment","createDocumentFragment","child","firstChild","compileElement","childNodes","Array","from","text","node","textContent","reg","compile","isTextNode","test","compileText","RegExp","$1","length","nodeAttr","attributes","attrName","attr","name","isDirect","method","dir","substring","isEventDirect","CompileUtil","eventHandler","removeAttribute","exp","indexOf","nodeType","class","bind","model","console","log","val","_getVMVal","addEventListener","e","_setVMVal","html","updateFn","updater","split","v","trim","ele","i","eventType","$options","textUpdater","classUpdater","htmlUpdater","innerHTML","modelUpdater","oldValue","Jesica","options","_data","_proxyData","initComputed","$compile","body","computed","setter","getter","me","proxyGetter","proxySetter","newVal","jesica","message","computedOne","computedTwo","clickFn"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,SAAS+B,OAAT,CAAiBC,EAAjB,EAAqBF,EAArB,EAAyB;AACrB,SAAKG,GAAL,GAAWH,EAAX;AACA;;;AAGA,SAAKI,GAAL,GAAW,KAAKC,aAAL,CAAmBH,EAAnB,IAAyBA,EAAzB,GAA8BI,SAASC,aAAT,CAAuBL,EAAvB,CAAzC;;AAEA,QAAI,KAAKE,GAAT,EAAc;AACV,aAAKI,SAAL,GAAiB,KAAKC,aAAL,CAAmB,KAAKL,GAAxB,CAAjB;AACA,aAAKM,IAAL;AACA,aAAKN,GAAL,CAASO,WAAT,CAAqB,KAAKH,SAA1B;AACH;AACJ;;AAEDP,QAAQ5B,SAAR,GAAoB;AAChBoC,iBADgB,yBACFP,EADE,EACE;AACd,YAAMU,WAAWN,SAASO,sBAAT,EAAjB;AACA,YAAIC,cAAJ;AACA,eAAMA,QAAQZ,GAAGa,UAAjB,EAA6B;AACzBH,qBAASD,WAAT,CAAqBG,KAArB;AACH;AACD,eAAOF,QAAP;AACH,KARe;AAUhBF,QAVgB,kBAUT;AACH,aAAKM,cAAL,CAAoB,KAAKR,SAAzB;AACH,KAZe;;AAahB;;;;AAIAQ,kBAjBgB,0BAiBDd,EAjBC,EAiBG;AAAA;;AACf,YAAMe,aAAaf,GAAGe,UAAtB;AACA;;;AAGAC,cAAMC,IAAN,CAAWF,UAAX,EAAuBzC,OAAvB,CAA+B,gBAAQ;AACnC,gBAAM4C,OAAOC,KAAKC,WAAlB;AACA,gBAAMC,MAAM,cAAZ;;AAEA,gBAAI,MAAKlB,aAAL,CAAmBgB,IAAnB,CAAJ,EAA8B;AAC1B;AACA,sBAAKG,OAAL,CAAaH,IAAb;AACH,aAHD,MAGO,IAAI,MAAKI,UAAL,CAAgBJ,IAAhB,KAAyBE,IAAIG,IAAJ,CAASN,IAAT,CAA7B,EAA6C;AAChD;AACA,sBAAKO,WAAL,CAAiBN,IAAjB,EAAuBO,OAAOC,EAA9B;AACH;;AAED;AACA,gBAAIR,KAAKJ,UAAL,IAAmBI,KAAKJ,UAAL,CAAgBa,MAAvC,EAA+C;AAC3C,sBAAKd,cAAL,CAAoBK,IAApB;AACH;AACJ,SAhBD;AAiBH,KAvCe;;AAwChB;;;;AAIAG,WA5CgB,mBA4CRH,IA5CQ,EA4CF;AAAA;;AACV;AACA,YAAMU,WAAWV,KAAKW,UAAtB;AACA;AACAd,cAAMC,IAAN,CAAWY,QAAX,EAAqBvD,OAArB,CAA6B,gBAAQ;AACjC,gBAAMyD,WAAWC,KAAKC,IAAtB;AACA;AACA,gBAAI,OAAKC,QAAL,CAAcH,QAAd,CAAJ,EAA6B;AACzB;AACA,oBAAMI,SAASH,KAAKvD,KAApB;AACA;AACA,oBAAM2D,MAAML,SAASM,SAAT,CAAmB,CAAnB,CAAZ;AACA;AACA,oBAAI,OAAKC,aAAL,CAAmBF,GAAnB,CAAJ,EAA6B;AACzB;AACAG,gCAAYC,YAAZ,CAAyBrB,IAAzB,EAA+B,OAAKlB,GAApC,EAAyCkC,MAAzC,EAAiDC,GAAjD;AACH,iBAHD,MAGO;AACH;AACAG,gCAAYH,GAAZ,KAAoBG,YAAYH,GAAZ,EAAiBjB,IAAjB,EAAuB,OAAKlB,GAA5B,EAAiCkC,MAAjC,CAApB;AACH;AACDhB,qBAAKsB,eAAL,CAAqBV,QAArB;AACH;AACJ,SAlBD;AAmBH,KAnEe;AAoEhBN,eApEgB,uBAoEJN,IApEI,EAoEEuB,GApEF,EAoEO;AACnBH,oBAAYrB,IAAZ,CAAiBC,IAAjB,EAAuB,KAAKlB,GAA5B,EAAiCyC,GAAjC;AACH,KAtEe;AAuEhBJ,iBAvEgB,yBAuEFN,IAvEE,EAuEI;AAChB,eAAOA,KAAKW,OAAL,CAAa,IAAb,MAAuB,CAA9B;AACH,KAzEe;AA0EhBT,YA1EgB,oBA0EPF,IA1EO,EA0ED;AACX,eAAOA,KAAKW,OAAL,CAAa,IAAb,MAAuB,CAA9B;AACH,KA5Ee;AA6EhBxC,iBA7EgB,yBA6EFH,EA7EE,EA6EE;AACd,eAAOA,GAAG4C,QAAH,KAAgB,CAAvB;AACH,KA/Ee;AAgFhBrB,cAhFgB,sBAgFLJ,IAhFK,EAgFC;AACb,eAAOA,KAAKyB,QAAL,KAAkB,CAAzB;AACH;AAlFe,CAApB;;AAqFA,IAAML,cAAc;AAChBM,SADgB,kBACV1B,IADU,EACJrB,EADI,EACA4C,GADA,EACK;AACjB,aAAKI,IAAL,CAAU3B,IAAV,EAAgBrB,EAAhB,EAAoB4C,GAApB,EAAyB,OAAzB;AACH,KAHe;AAIhBK,SAJgB,iBAIV5B,IAJU,EAIJrB,EAJI,EAIA4C,GAJA,EAIK;AAAA;;AACjBM,gBAAQC,GAAR,CAAYP,GAAZ;AACA;AACA,aAAKI,IAAL,CAAU3B,IAAV,EAAgBrB,EAAhB,EAAoB4C,GAApB,EAAyB,OAAzB;AACA,YAAIQ,MAAM,KAAKC,SAAL,CAAerD,EAAf,EAAmB4C,GAAnB,CAAV;AACAvB,aAAKiC,gBAAL,CAAsB,OAAtB,EAA+B,UAACC,CAAD,EAAO;AAClC,gBAAM5E,QAAQ4E,EAAEpE,MAAF,CAASR,KAAvB;AACA,gBAAIyE,QAAQzE,KAAZ,EAAmB;AACf;AACH;AACD,mBAAK6E,SAAL,CAAexD,EAAf,EAAmB4C,GAAnB,EAAwBjE,KAAxB;AACAyE,kBAAMzE,KAAN;AACH,SAPD,EAOG,KAPH;AAQH,KAjBe;AAkBhByC,QAlBgB,gBAkBXC,IAlBW,EAkBLrB,EAlBK,EAkBD4C,GAlBC,EAkBI;AAChB,aAAKI,IAAL,CAAU3B,IAAV,EAAgBrB,EAAhB,EAAoB4C,GAApB,EAAyB,MAAzB;AACH,KApBe;AAqBhBa,QArBgB,gBAqBXpC,IArBW,EAqBLrB,EArBK,EAqBD4C,GArBC,EAqBI;AAChB,aAAKI,IAAL,CAAU3B,IAAV,EAAgBrB,EAAhB,EAAoB4C,GAApB,EAAyB,MAAzB;AACH,KAvBe;AAwBhBI,QAxBgB,gBAwBX3B,IAxBW,EAwBLrB,EAxBK,EAwBD4C,GAxBC,EAwBIN,GAxBJ,EAwBS;AACrB;AACA,YAAMoB,WAAWC,QAAQrB,MAAM,SAAd,CAAjB;AACAoB,oBAAYA,SAASrC,IAAT,EAAe,KAAKgC,SAAL,CAAerD,EAAf,EAAmB4C,GAAnB,CAAf,CAAZ;;AAEA;AACH,KA9Be;AA+BhBS,aA/BgB,qBA+BNrD,EA/BM,EA+BF4C,GA/BE,EA+BG;AACf,YAAIQ,MAAMpD,EAAV;AACA4C,cAAMA,IAAIgB,KAAJ,CAAU,GAAV,CAAN;AACAhB,YAAIpE,OAAJ,CAAa,aAAK;AACd4E,kBAAMA,IAAIS,EAAEC,IAAF,EAAJ,CAAN;AACH,SAFD;AAGA,eAAOV,GAAP;AACH,KAtCe;AAuChBI,aAvCgB,qBAuCNxD,EAvCM,EAuCF4C,GAvCE,EAuCGjE,KAvCH,EAuCS;AACrB,YAAIyE,MAAMpD,EAAV;AACA4C,cAAMA,IAAIgB,KAAJ,CAAU,GAAV,CAAN;AACAhB,YAAIpE,OAAJ,CAAY,UAACuF,GAAD,EAAMC,CAAN,EAAY;AACpB,gBAAIA,IAAIpB,IAAId,MAAJ,GAAa,CAArB,EAAwB;AACpBsB,sBAAMA,IAAIW,GAAJ,CAAN;AACH,aAFD,MAEO;AACHX,oBAAIW,GAAJ,IAAWpF,KAAX;AACH;AACJ,SAND;AAOH,KAjDe;AAkDhB+D,gBAlDgB,wBAkDHrB,IAlDG,EAkDGrB,EAlDH,EAkDO4C,GAlDP,EAkDYN,GAlDZ,EAkDiB;AAC7B;;;AAGA,YAAM2B,YAAY3B,IAAIsB,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAlB;AACA,YAAMvB,SAASrC,GAAGkE,QAAH,CAAY7B,MAAZ,IAAsBrC,GAAGkE,QAAH,CAAY7B,MAAZ,CAAmBO,GAAnB,CAArC;;AAEA,YAAIqB,aAAa5B,MAAjB,EAAyB;AACrBhB,iBAAKiC,gBAAL,CAAsBW,SAAtB,EAAiC5B,OAAOW,IAAP,CAAYhD,EAAZ,CAAjC,EAAkD,KAAlD;AACH;AACJ;AA5De,CAApB;;AA+DA,IAAM2D,UAAU;AACZQ,eADY,uBACA9C,IADA,EACM1C,KADN,EACa;AACrB0C,aAAKC,WAAL,GAAmB,OAAO3C,KAAP,KAAiB,WAAjB,GAA+B,EAA/B,GAAoCA,KAAvD;AACH,KAHW;AAIZyF,gBAJY,wBAIC/C,IAJD,EAIO1C,KAJP,EAIc,CAEzB,CANW;AAOZ0F,eAPY,uBAOAhD,IAPA,EAOM1C,KAPN,EAOa;AACrB0C,aAAKiD,SAAL,GAAiB,OAAO3F,KAAP,KAAiB,WAAjB,GAA+B,EAA/B,GAAoCA,KAArD;AACH,KATW;;;AAWZ4F,kBAAc,sBAASlD,IAAT,EAAe1C,KAAf,EAAsB6F,QAAtB,EAAgC;AAC1CnD,aAAK1C,KAAL,GAAa,OAAOA,KAAP,IAAgB,WAAhB,GAA8B,EAA9B,GAAmCA,KAAhD;AACH;AAbW,CAAhB;;kBAgBesB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ADlLf,SAAS/B,QAAT,CAAkBC,IAAlB,EAAwB;AACpB,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKC,IAAL,CAAUD,IAAV;AACH;;AAEDD,SAASG,SAAT,GAAqB;AACjBD,QADiB,gBACZD,IADY,EACN;AAAA;;AACPG,eAAOC,IAAP,CAAYJ,IAAZ,EAAkBK,OAAlB,CAA0B,eAAO;AAC7B,kBAAKC,OAAL,CAAaC,GAAb,EAAkBP,KAAKO,GAAL,CAAlB;AACH,SAFD;AAGH,KALgB;AAMjBD,WANiB,mBAMTC,GANS,EAMJC,KANI,EAMG;AAChB,aAAKC,cAAL,CAAoB,KAAKT,IAAzB,EAA+BO,GAA/B,EAAoCC,KAApC;AACH,KARgB;AASjBC,kBATiB,0BASFT,IATE,EASIO,GATJ,EASSC,KATT,EASgB;AAC7B,YAAME,MAAM,IAAIC,GAAJ,EAAZ;AACAR,eAAOS,cAAP,CAAsBZ,IAAtB,EAA4BO,GAA5B,EAAiC;AAC7BM,wBAAY,IADiB;AAE7BC,0BAAc,KAFe;AAG7BC,eAH6B,iBAGvB;AACF,oBAAIL,IAAIM,MAAR,EAAgB;AACZN,wBAAIO,MAAJ;AACH;AACD,uBAAOT,KAAP;AACH,aAR4B;AAS7BU,eAT6B,eASzBC,QATyB,EASf;AACV,oBAAIX,UAAUW,QAAd,EAAwB;AACpB;AACH;AACDX,wBAAQW,QAAR;AACH;AAd4B,SAAjC;AAgBH;AA3BgB,CAArB;;AA8BA,IAAIC,MAAM,CAAV;;AAEA,SAAST,GAAT,GAAe;AACX,SAAKU,EAAL,GAAUD,KAAV;AACA,SAAKE,IAAL,GAAY,EAAZ;AACH;;AAEDX,IAAIT,SAAJ,GAAgB;AACZqB,UADY,kBACLC,GADK,EACA;AACR,aAAKF,IAAL,CAAUG,IAAV,CAAeD,GAAf;AACH,KAHW;AAIZP,UAJY,oBAIH;AACLN,YAAIK,MAAJ,CAAWO,MAAX,CAAkB,IAAlB;AACH,KANW;AAOZG,UAPY,oBAOH;AACL,aAAKJ,IAAL,CAAUjB,OAAV,CAAkB,eAAO;AACrBmB,gBAAIG,MAAJ;AACH,SAFD;AAGH;AAXW,CAAhB;;AAeA,SAASC,OAAT,CAAiB5B,IAAjB,EAAuB6B,EAAvB,EAA2B;AACvB,QAAI,CAAC7B,IAAD,IAAS,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAA7B,EAAuC;AACnC;AACH;AACD,WAAO,IAAID,QAAJ,CAAaC,IAAb,CAAP;AACH;;kBAGc4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8QEjEf;;;;AAIA;;;;AACA;;;;;;AAEA,SAAS0E,MAAT,CAAgBC,OAAhB,EAAyB;AAAA;;AACrB,SAAKR,QAAL,GAAgBQ,WAAW,EAA3B;AACA,SAAKC,KAAL,GAAa,KAAKT,QAAL,CAAc/F,IAA3B;AACAG,WAAOC,IAAP,CAAY,KAAKoG,KAAjB,EAAwBnG,OAAxB,CAAgC,UAACE,GAAD,EAAS;AACrC,cAAKkG,UAAL,CAAgBlG,GAAhB;AACH,KAFD;AAGA,SAAKmG,YAAL;AACA;;;AAGA,4BAAQ,KAAKX,QAAL,CAAc/F,IAAtB,EAA4B,IAA5B;AACA,SAAK2G,QAAL,GAAgB,sBAAY,KAAKZ,QAAL,CAAchE,EAAd,IAAoBI,SAASyE,IAAzC,EAA+C,IAA/C,CAAhB;AACH;;AAEDN,OAAOpG,SAAP,GAAmB;AACfwG,gBADe,0BACA;AAAA;;AACX,YAAMG,WAAW,KAAKd,QAAL,CAAcc,QAA/B;AACA,YAAI,QAAOA,QAAP,yCAAOA,QAAP,OAAoB,QAAxB,EAAkC;AAC9B1G,mBAAOC,IAAP,CAAYyG,QAAZ,EAAsBxG,OAAtB,CAA8B,eAAO;AACjCF,uBAAOS,cAAP,SAA4BL,GAA5B,EAAiC;AAC7BQ,yBAAK,OAAO8F,SAAStG,GAAT,CAAP,KAAyB,UAAzB,GACKsG,SAAStG,GAAT,CADL,GAEKsG,SAAStG,GAAT,EAAcQ,GAHK;AAI7BG,yBAAK,eAAU,CAAE;AAJY,iBAAjC;AAMH,aAPD;AAQH;AACJ,KAbc;;AAcfuF,gBAAY,oBAASlG,GAAT,EAAcuG,MAAd,EAAsBC,MAAtB,EAA8B;AACtC,YAAIC,KAAK,IAAT;AACAF,iBAASA,UACT3G,OAAOS,cAAP,CAAsBoG,EAAtB,EAA0BzG,GAA1B,EAA+B;AAC3BO,0BAAc,KADa;AAE3BD,wBAAY,IAFe;AAG3BE,iBAAK,SAASkG,WAAT,GAAuB;AACxB,uBAAOD,GAAGR,KAAH,CAASjG,GAAT,CAAP;AACH,aAL0B;AAM3BW,iBAAK,SAASgG,WAAT,CAAqBC,MAArB,EAA6B;AAC9BH,mBAAGR,KAAH,CAASjG,GAAT,IAAgB4G,MAAhB;AACH;AAR0B,SAA/B,CADA;AAWH;AA3Bc,CAAnB;;AA8BA,IAAMC,SAAS,IAAId,MAAJ,CAAW;AACtBvE,QAAI,MADkB;AAEtB/B,UAAM;AACFqH,iBAAS;AADP,KAFgB;AAKtBR,cAAU;AACNS,mBADM,yBACQ;AACV,mBAAO,aAAP;AACH,SAHK;AAINC,mBAJM,yBAIQ;AACV,mBAAO,aAAP;AACH;AANK,KALY;AAatBrD,YAAQ;AACJsD,eADI,qBACM;AACNzC,oBAAQC,GAAR,CAAY,UAAZ;AACH;AAHG;AAbc,CAAX,CAAf","file":"cb1ca6a4f85c74493a32914ec8499aca.map","sourcesContent":["function Observer(data) {\n    this.data = data;\n    this.walk(data);\n}\n\nObserver.prototype = {\n    walk(data) {\n        Object.keys(data).forEach(key => {\n            this.convert(key, data[key]);\n        })\n    },\n    convert(key, value) {\n        this.defineReactive(this.data, key, value);\n    },\n    defineReactive(data, key, value) {\n        const dep = new Dep();\n        Object.defineProperty(data, key, {\n            enumerable: true,\n            configurable: false,\n            get() {\n                if (dep.target) {\n                    dep.depend();\n                }\n                return value;\n            },\n            set(newValue) {\n                if (value === newValue) {\n                    return;\n                }\n                value = newValue;\n            }\n        });\n    }\n}\n\nlet uid = 0;\n\nfunction Dep() {\n    this.id = uid++;\n    this.subs = [];\n}\n\nDep.prototype = {\n    addSub(sub) {\n        this.subs.push(sub);\n    },\n    depend() {\n        Dep.target.addSub(this);\n    },\n    notify() {\n        this.subs.forEach(sub => {\n            sub.update();\n        })\n    }\n}\n\n\nfunction observe(data, vm) {\n    if (!data || typeof data !== 'object') {\n        return;\n    }\n    return new Observer(data)\n}\n\n\nexport default observe;","function Compile(el, vm) {\n    this.$vm = vm;\n    /**\n     * 获取dom根节点\n     */\n    this.$el = this.isElementNode(el) ? el : document.querySelector(el);\n\n    if (this.$el) {\n        this.$fragment = this.node2fragment(this.$el);\n        this.init();\n        this.$el.appendChild(this.$fragment);\n    }\n}\n\nCompile.prototype = {\n    node2fragment(el) {\n        const fragment = document.createDocumentFragment();\n        let child;\n        while(child = el.firstChild) {\n            fragment.appendChild(child)\n        }\n        return fragment;\n    },\n    \n    init() {\n        this.compileElement(this.$fragment);\n    },\n    /**\n     * 编译元素\n     * @param {*} el \n     */\n    compileElement(el) {\n        const childNodes = el.childNodes;\n        /**\n         * 遍历子节点\n         */\n        Array.from(childNodes).forEach(node => {\n            const text = node.textContent;\n            const reg = /\\{\\{(.*)\\}\\}/;\n\n            if (this.isElementNode(node)) {\n                // 如果是节点，则编译这个节点的属性，如\"v-\"后的指令\n                this.compile(node);\n            } else if (this.isTextNode(node) && reg.test(text)) {\n                // 单纯的文字\n                this.compileText(node, RegExp.$1);\n            }\n\n            // 如果存在子节点，继续递归\n            if (node.childNodes && node.childNodes.length) {\n                this.compileElement(node);\n            }\n        })\n    },\n    /**\n     * 编译\n     * @param {*} node \n     */\n    compile(node) {\n        // 获得节点的属性\n        const nodeAttr = node.attributes;\n        // 遍历属性\n        Array.from(nodeAttr).forEach(attr => {\n            const attrName = attr.name;\n            // 如果是以 \"v-\"开头的，则认定为mvvm的定义\n            if (this.isDirect(attrName)) {\n                // 获得事件函数名称\n                const method = attr.value;\n                // 获得事件类型\n                const dir = attrName.substring(2);\n                // 如果是以“on”开头的，则为某个事件\n                if (this.isEventDirect(dir)) {\n                    // 绑定事件\n                    CompileUtil.eventHandler(node, this.$vm, method, dir);\n                } else {\n                    // 普通事件\n                    CompileUtil[dir] && CompileUtil[dir](node, this.$vm, method);\n                }\n                node.removeAttribute(attrName);\n            }\n        })\n    },\n    compileText(node, exp) {\n        CompileUtil.text(node, this.$vm, exp);\n    },\n    isEventDirect(attr) {\n        return attr.indexOf('on') === 0;\n    },\n    isDirect(attr) {\n        return attr.indexOf('v-') === 0;\n    },\n    isElementNode(el) {\n        return el.nodeType === 1;\n    },\n    isTextNode(node) {\n        return node.nodeType === 3;\n    }\n}\n\nconst CompileUtil = {\n    class(node, vm, exp) {\n        this.bind(node, vm, exp, 'class');\n    },\n    model(node, vm, exp) {\n        console.log(exp);\n        // important\n        this.bind(node, vm, exp, 'model');\n        let val = this._getVMVal(vm, exp);\n        node.addEventListener('input', (e) => {\n            const value = e.target.value;\n            if (val === value) {\n                return;\n            }\n            this._setVMVal(vm, exp, value);\n            val = value;\n        }, false)\n    },\n    text(node, vm, exp) {\n        this.bind(node, vm, exp, 'text');\n    },\n    html(node, vm, exp) {\n        this.bind(node, vm, exp, 'html');\n    },\n    bind(node, vm, exp, dir) {\n        // 渲染第一次数据\n        const updateFn = updater[dir + 'Updater'];\n        updateFn && updateFn(node, this._getVMVal(vm, exp));\n\n        // watcher here\n    },\n    _getVMVal(vm, exp) {\n        let val = vm;\n        exp = exp.split('.');\n        exp.forEach( v => {\n            val = val[v.trim()];\n        });\n        return val;\n    },\n    _setVMVal(vm, exp, value){\n        let val = vm;\n        exp = exp.split('.');\n        exp.forEach((ele, i) => {\n            if (i < exp.length - 1) {\n                val = val[ele]\n            } else {\n                val[ele] = value;\n            }\n        });\n    },\n    eventHandler(node, vm, exp, dir) {\n        /**\n         * 事件绑定\n         */\n        const eventType = dir.split(':')[1];\n        const method = vm.$options.method && vm.$options.method[exp];\n\n        if (eventType && method) {\n            node.addEventListener(eventType, method.bind(vm), false);\n        }\n    }\n}\n\nconst updater = {\n    textUpdater(node, value) {\n        node.textContent = typeof value === 'undefined' ? '' : value\n    },\n    classUpdater(node, value) {\n\n    },\n    htmlUpdater(node, value) {\n        node.innerHTML = typeof value === 'undefined' ? '' : value;\n    },\n    \n    modelUpdater: function(node, value, oldValue) {\n        node.value = typeof value == 'undefined' ? '' : value;\n    }\n}\n\nexport default Compile;","/**\n * what is mvvm\n */\n\nimport observe from './Observer';\nimport Compile from './Compile';\n\nfunction Jesica(options) {\n    this.$options = options || {};\n    this._data = this.$options.data;\n    Object.keys(this._data).forEach((key) => {\n        this._proxyData(key);\n    });\n    this.initComputed();\n    /**\n     * this -> Jesica对象\n     */\n    observe(this.$options.data, this);\n    this.$compile = new Compile(this.$options.el || document.body, this);\n}\n\nJesica.prototype = {\n    initComputed() {\n        const computed = this.$options.computed;\n        if (typeof computed === 'object') {\n            Object.keys(computed).forEach(key => {\n                Object.defineProperty(this, key, {\n                    get: typeof computed[key] === 'function' \n                            ? computed[key] \n                            : computed[key].get,\n                    set: function(){}\n                })\n            });\n        }\n    },\n    _proxyData: function(key, setter, getter) {\n        var me = this;\n        setter = setter || \n        Object.defineProperty(me, key, {\n            configurable: false,\n            enumerable: true,\n            get: function proxyGetter() {\n                return me._data[key];\n            },\n            set: function proxySetter(newVal) {\n                me._data[key] = newVal;\n            }\n        });\n    },\n}\n\nconst jesica = new Jesica({\n    el: '#app',\n    data: {\n        message: \"message1\"\n    },\n    computed: {\n        computedOne() {\n            return 'computedOne'\n        },\n        computedTwo() {\n            return 'computedTwo'\n        }\n    },\n    method: {\n        clickFn() {\n            console.log('click me');\n        }\n    }\n});"]}